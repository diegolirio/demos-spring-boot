# Set environment variable for access token

### Keycloak

@token = ""

# Login
POST http://localhost:8080/realms/corf/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

client_id=corf_front&username=ddamacena&password=123456&grant_type=password

###
HTTP/1.1 200 OK
Content-Type: application/json
{
  "access_token": "<YOUR_TOKEN>"
}

###
# Set access token in environment variable
@token = {{access_token}}

### Spring-Boot-App

# GET Products
GET http://localhost:8083/products
Content-Type: application/json
#Authorization: Basic username password
#Authorization: Bearer {{token}}
Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJRU3NELUZ0QmxYNGZKU3RVdTlSMTNYT1VOX1hfQTBBTlQwaVFCbWtIeHVjIn0.eyJleHAiOjE3MDk1MDgxNDQsImlhdCI6MTcwOTUwNzg0NCwianRpIjoiYWZiY2U1ZTEtZGQzYy00MGMyLWI4M2QtMTIyMWMyMjhiYWIyIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9jb3JmIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6IjhiYTBjNzI2LTgwODAtNDgwNS04YzQ2LWI3MmEzNmY5ZjI3OCIsInR5cCI6IkJlYXJlciIsImF6cCI6ImNvcmZfZnJvbnQiLCJzZXNzaW9uX3N0YXRlIjoiYzg0OTc2Y2QtZTQ1Yy00YzQzLTkzZjAtNzhjNDFiYzMyMmFkIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiQ1VTVE9EWV9HRVQiLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1jb3JmIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiYzg0OTc2Y2QtZTQ1Yy00YzQzLTkzZjAtNzhjNDFiYzMyMmFkIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm5hbWUiOiJEaWVnbyBMaXJpbyIsInByZWZlcnJlZF91c2VybmFtZSI6ImRkYW1hY2VuYSIsImdpdmVuX25hbWUiOiJEaWVnbyIsImZhbWlseV9uYW1lIjoiTGlyaW8iLCJlbWFpbCI6ImRpZWdvbGlyaW8uZGxAZ21haWwuY29tIn0.dDD1ijnjvAPC31cT23-s-bjlbwFfV5BQU7hSrx4n5obsHi5VzFN8ZYNTGVZwTHADIeSvgqvx5_joPhOdE9HoFhnOk86yqOdl-mhZxtZ_J_MgwpkMsVscXBeW9HXa8IEUZIjMHPNWZJU9qvkctnK3fA3gMVl5v2goujVVbbjQOerB4oY1zU7iebHeTVj7-YUmUZzMRDKtH2jq57QJHBNeUoBj3_thXklKl2P7JMew-SqdX7HLsCwsmc89cWXXpZbqD_IVM8MkusHy7q-n9k1w3MhRoaDigpjI3R6t9xcIWb_qYgASKVXED-Vqvyd_uHNfWOnUfok_ZrhDNg6c5eQcAA

###
# GET Products public access
GET http://localhost:8081/products/no-security
Content-Type: application/json

###
# POST Product public access
POST http://localhost:8081/products/no-security?type=CRYPTO
Content-Type: application/json

###
# GET Keycloak Test Connect
GET http://localhost:8081/keycloak
Content-Type: application/json

### Kong + Spring Boot

# GET Kong default API
GET http://localhost:8001
Content-Type: application/json

###
# GET Kong default API
GET http://localhost:8000/products-items
Content-Type: application/json

###
# GET Kong default API
GET http://localhost:8000/products/no-security
Content-Type: application/json

###
# POST Product public access
POST http://localhost:8000/products/no-security?type=LCA
Content-Type: application/json

### Kong + GraphQL

###
# Mutation Custody
POST http://localhost:8000/graphql
Content-Type: application/json

{
  "query": "mutation {createCustody(customerId: \"CUSTOMER:516DBV56DF65BV1DFB\") { id customerId purchaseValue product { id name } createdAt }}"
}

### Query Custody
# Query Custody
POST http://localhost:8000/graphql
content-type: application/json

{
  "query": "query { customdyById(id: \"5cda7cf3-e9a3-4eff-8781-3f7bc8549857\") { customerId product { type name } createdAt }}"
}
